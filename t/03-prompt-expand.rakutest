use v6.d;
use Test;

use lib '.';
use lib './lib';

use LLM::Prompts;


## 1
is
        llm-prompt-expand('This is a simple prompt'),
        'This is a simple prompt';

## 2
my $spec2 = q:to/END/;

 @Yoda
END

is
        llm-prompt-expand($spec2).chomp,
        llm-prompt('Yoda').chomp;

## 3
my $spec3 = q:to/END/;
!Translated|German
END

is
        llm-prompt-expand($spec3).chomp,
        llm-prompt('Translated')('German').chomp;

## 4
is
        llm-prompt-expand('@Yoda The summer is gone.'),
        llm-prompt('Yoda') ~ ' The summer is gone.';

## 5
my $spec5 = 'The summer is gone, school is comming soon.';
is
        llm-prompt-expand("$spec5 #HaikuStyled"),
        $spec5 ~ ' ' ~ llm-prompt('HaikuStyled');

## 6
is
        llm-prompt-expand("$spec5 #HaikuStyled #Translated"),
        $spec5 ~ ' ' ~ llm-prompt('HaikuStyled') ~ ' ' ~ llm-prompt('Translated').();

## 7
is
        llm-prompt-expand("$spec5 #HaikuStyled #Translated|German"),
        $spec5 ~ ' ' ~ llm-prompt('HaikuStyled') ~ ' ' ~ llm-prompt('Translated')('German');

## 8
is
        llm-prompt-expand("!Translated|Russian $spec5"),
        llm-prompt('Translated')('Russian') ~ ' ' ~ $spec5;


## 9
is
        llm-prompt-expand("!Translated|'High German' $spec5"),
        llm-prompt('Translated')('High German') ~ ' ' ~ $spec5;


## 10
my $spec8 = 'The cat chased the mouse.';
is
        llm-prompt-expand("!FormalRephrase $spec8"),
        llm-prompt('FormalRephrase')($spec8);

## 11
is
        llm-prompt-expand("!FormalRephrase>$spec8"),
        llm-prompt('FormalRephrase')($spec8);

done-testing;
